!function(){"use strict";var t={948:function(t,e,i){var o=l(i(311)),n=l(i(754));function l(t){return t&&t.__esModule?t:{default:t}}o.default.entwine("workflow",(t=>{t(".workflow-field").entwine({Loading:null,Dialog:null,onmatch(){const e=this;this.setLoading(this.find(".workflow-field-loading")),this.setDialog(this.find(".workflow-field-dialog")),this.getDialog().data("workflow-field",this).dialog({autoOpen:!1,width:800,height:600,modal:!0,dialogClass:"workflow-field-editor-dialog"}),this.getDialog().on("click","button",(e=>{t(e.currentTarget).addClass("disabled")})),this.getDialog().on("submit","form",(i=>(t(i.currentTarget).ajaxSubmit((i=>{t(i).is(".workflow-field")?(e.getDialog().empty().dialog("close"),e.replaceWith(i)):e.getDialog().html(i)})),!1)))},onunmatch(){t(".workflow-field-editor-dialog").remove()},showDialog(e){const i=this.getDialog();i.empty().dialog("open"),i.parent().addClass("loading"),t.get(e).done((t=>{i.html(t).parent().removeClass("loading")}))},loading(t){this.getLoading().toggle(void 0===t||t)}}),t(".workflow-field .workflow-field-actions").entwine({onmatch(){t(".workflow-field .workflow-field-action-disabled").on("click",(()=>!1)),this.sortable({axis:"y",containment:this,placeholder:"ui-state-highlight workflow-placeholder",handle:".workflow-field-action-drag",tolerance:"pointer",update(){const e=t(this).find(".workflow-field-action"),i=t(this).closest(".workflow-field"),o=i.data("sort-link"),n={"id[]":e.map(((e,i)=>t(i).data("id"))).get(),class:"Symbiote\\AdvancedWorkflow\\DataObjects\\WorkflowAction",SecurityID:i.data("securityid")};i.loading(),t.post(o,n).done((()=>{i.loading(!1)}))}})}}),t(".workflow-field .workflow-field-action-transitions").entwine({onmatch(){this.sortable({axis:"y",containment:this,handle:".workflow-field-action-drag",tolerance:"pointer",update(){const e=t(this).find("li"),i=t(this).closest(".workflow-field"),o=i.data("sort-link"),n={"id[]":e.map(((e,i)=>t(i).data("id"))).get(),class:"Symbiote\\AdvancedWorkflow\\DataObjects\\WorkflowTransition",parent:t(this).closest(".workflow-field-action").data("id"),SecurityID:i.data("securityid")};i.loading(),t.post(o,n).done((()=>{i.loading(!1)}))}})}}),t(".workflow-field .workflow-field-create-class").entwine({onmatch(){this.chosen().addClass("has-chnz")},onchange(){this.siblings(".workflow-field-do-create").toggleClass("disabled",!this.val())}}),t(".workflow-field .workflow-field-do-create").entwine({onclick(){const t=this.siblings(".workflow-field-create-class"),e=this.closest(".workflow-field");return t.val()&&e.showDialog(t.val()),!1}}),t(".workflow-field .workflow-field-open-dialog").entwine({onclick(){return this.closest(".workflow-field").showDialog(this.prop("href")),!1}}),t(".workflow-field .workflow-field-delete").entwine({onclick(){if(confirm(n.default._t("Workflow.DeleteQuestion"))){const e={SecurityID:this.data("securityid")};t.post(this.prop("href"),e).done((e=>{t(".workflow-field").replaceWith(e)}))}return!1}}),t("#Root_PublishingSchedule").entwine({onmatch(){const e=this,i=this.find('input[name="PublishOnDate[date]"]'),o=this.find('input[name="PublishOnDate[time]"]'),n=i.parent().parent();t("#Form_EditForm_action_publish").attr("disabled")||(e.checkEmbargo(t(i).val(),t(o).val(),n),i.change((()=>{e.checkEmbargo(t(i).val(),t(o).val(),n)})),o.change((()=>{e.checkEmbargo(t(i).val(),t(o).val(),n)}))),this._super()},linkScheduled(e){t("#workflow-schedule").click((()=>{const i=e.closest(".ui-tabs-panel.tab").attr("id");return t(`#tab-${i}`).trigger("click"),!1}))},checkEmbargo(e,i,o){t(".Actions #embargo-message").remove();const l=void 0===e||0===e.length,a=void 0===i||0===i.length;if(l&&a)t("#Form_EditForm_action_publish").removeClass("embargo"),t("#Form_EditForm_action_publish").prev("button").removeClass("ui-corner-right");else{let l="";t("#Form_EditForm_action_publish").addClass("embargo"),t("#Form_EditForm_action_publish").prev("button").addClass("ui-corner-right"),l=""===e?n.default.sprintf(n.default._t("Workflow.EMBARGOMESSAGETIME"),i):""===i?n.default.sprintf(n.default._t("Workflow.EMBARGOMESSAGEDATE"),e):n.default.sprintf(n.default._t("Workflow.EMBARGOMESSAGEDATETIME"),e,i),l=l.replace("<a>",'<a href="#" id="workflow-schedule">'),t(".Actions #ActionMenus").after(`<p class="edit-info" id="embargo-message">${l}</p>`),this.linkScheduled(o)}return!1}})})),o.default.entwine("ss",(t=>{t(".importSpec").entwine({onmatch(){this.hide()}}),t("#Form_ImportForm_error").entwine({onmatch(){this.html(this.html().replace("CSV",""))}}),t(".grid-field .action.no-ajax, .grid-field .no-ajax .action:button").entwine({onclick(e){return this.hasClass("export-link")?(window.location.href=t.path.makeUrlAbsolute(this.attr("href")),!1):this._super(e)}})}))},291:function(t,e,i){var o;((o=i(311))&&o.__esModule?o:{default:o}).default.entwine("ss",(t=>{t(".ss-gridfield .ss-gridfield-item").entwine({onmatch(){const t=this.closest("tr");this.find(".col-buttons.disabled").length&&(t.addClass("disabled").on("click",(t=>"A"===t.target.nodeName&&null===t.target.className.match(/edit-link/))),this.find("a.edit-link").attr("title",""))}}),t(".AdvancedWorkflowAdmin .ss-gridfield-item.disabled").entwine({onmouseover(){this.css("cursor","default")}}),t(".ss-gridfield .ss-gridfield-item td.col-Title a").entwine({onclick(t){t.stopPropagation()}}),t(".ss-gridfield .col-buttons .action.gridfield-button-delete, .cms-edit-form .Actions button.action.action-delete").entwine({onclick(e){this._super(e),t(".cms-container").reloadCurrentPanel(),e.preventDefault()}})}))},147:function(t,e,i){var o;((o=i(311))&&o.__esModule?o:{default:o}).default.entwine("ss",(t=>{t(".cms-edit-form").find(".Actions, .btn-toolbar").find("#ActionMenus_WorkflowOptions .action").entwine({onclick(e){const i=this.attr("data-transitionid");let o=this.attr("name");o=o.replace(/-\d+/,""),this.attr("name",o),t("input[name=TransitionID]").val(i),this._super(e)}}),t(".cms-edit-form").find(".Actions, .btn-toolbar").find(".action.start-workflow").entwine({onmouseup(e){t("input[name=TriggeredWorkflowID]").val(this.data("workflow"));const i=this.attr("name");this.attr("name",i.replace(/-\d+/,"")),this._super(e)}})}))},872:function(t,e,i){var o=l(i(311)),n=l(i(754));function l(t){return t&&t.__esModule?t:{default:t}}o.default.entwine("ss",(t=>{t(".advancedWorkflowTransition").entwine({onclick(e){e.preventDefault();const i=prompt("Comments"),o=this.parents("ul").attr("data-instance-id"),l=this.attr("data-transition-id"),a=t("[name=SecurityID]").val();return a?(t.post("AdvancedWorkflowActionController/transition",{SecurityID:a,comments:i,transition:l,id:o},(e=>{if(e){const i=t.parseJSON(e);i.success?location.href=i.link:alert(n.default._t("Workflow.ProcessError"))}})),!1):(alert("Invalid SecurityID field!"),!1)}})}))},754:function(t){t.exports=i18n},311:function(t){t.exports=jQuery}},e={};function i(o){var n=e[o];if(void 0!==n)return n.exports;var l=e[o]={exports:{}};return t[o](l,l.exports,i),l.exports}i(147),i(872),i(948),i(291)}();